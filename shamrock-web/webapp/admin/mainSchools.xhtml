<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:tr="http://myfaces.apache.org/trinidad" xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich">

<ui:composition template="/templates/main.xhtml">

  <ui:define name="content">

    <tr:panelCaptionGroup captionText="Main Schools">

      <h:form id="list">

        <rich:dataTable value="#{mainSchoolList.mainSchools}" var="school" width="900px" rows="25">

          <f:facet name="header">
            <h:outputText value="Main Schools" />
          </f:facet>

          <rich:column width="7">
            <f:facet name="header">
              <h:outputText value="Edit" />
            </f:facet>
            <a4j:commandLink reRender="schoolDetail">
              <a4j:actionparam name="id" value="#{school.id}" assignTo="#{mainSchoolList.selectedSchoolId}" />
              <a4j:actionparam name="selectedSchoolAction" value="edit"
                assignTo="#{mainSchoolList.selectedSchoolAction}" />
              <h:graphicImage id="edit" url="/images/edit.gif" border="0" />
            </a4j:commandLink>
          </rich:column>

          <rich:column width="7">
            <f:facet name="header">
              <h:outputText value="Del" />
            </f:facet>
            <a4j:commandLink reRender="schoolDetail">
              <a4j:actionparam name="id" value="#{school.id}" assignTo="#{mainSchoolList.selectedSchoolId}" />
              <a4j:actionparam name="selectedSchoolAction" value="del" assignTo="#{mainSchoolList.selectedSchoolAction}" />
              <h:graphicImage id="del" url="/images/delete.gif" border="0" />
            </a4j:commandLink>
          </rich:column>

          <rich:column sortBy="#{school.name}">
            <f:facet name="header">
              <h:outputText value="Name" />
            </f:facet>
            <h:outputText value="#{school.name}" />
          </rich:column>

          <rich:column sortBy="#{school.description}">
            <f:facet name="header">
              <h:outputText value="Description" />
            </f:facet>
            <h:outputText value="#{school.description}" />
          </rich:column>

        </rich:dataTable>

        <rich:spacer width="1" height="20" />

        <a4j:commandLink reRender="schoolDetail" value="add" actionListener="#{mainSchoolList.prepareAdd}"
          immediate="true">
          <a4j:actionparam name="selectedSchoolAction" value="add" assignTo="#{mainSchoolList.selectedSchoolAction}" />
        </a4j:commandLink>
      </h:form>
    </tr:panelCaptionGroup>

    <rich:spacer width="1" height="20" />

    <a4j:outputPanel layout="none" ajaxRendered="true">
      <h:form id="schoolDetail" rendered="#{mainSchoolList.renderSelectedSchool}">
        <tr:panelCaptionGroup captionText="School Details">
          <tr:panelFormLayout rows="7" labelWidth="20%" fieldWidth="67%">
            <h:inputHidden id="selectedSchoolId" value="#{mainSchoolList.selectedSchoolId}" />
            <h:inputHidden id="selectedSchoolAction" value="#{mainSchoolList.selectedSchoolAction}" />
            <tr:inputText columns="30" label="Name" value="#{mainSchoolList.selectedSchool.name}"
              readOnly="#{mainSchoolList.readOnly}" />
            <rich:spacer width="1" height="10" />
            <tr:inputText columns="60" label="Description" value="#{mainSchoolList.selectedSchool.description}"
              readOnly="#{mainSchoolList.readOnly}" />
            <rich:spacer width="1" height="10" />
            <a4j:commandLink reRender="list" value="#{mainSchoolList.selectedSchoolAction}"
              actionListener="#{mainSchoolList.processSelectedSchool}" immediate="#{mainSchoolList.readOnly}" />
          </tr:panelFormLayout>
        </tr:panelCaptionGroup>
      </h:form>
    </a4j:outputPanel>

  </ui:define>
</ui:composition>
</html>
